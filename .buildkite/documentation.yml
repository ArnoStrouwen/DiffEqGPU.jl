steps:
  - label: ":page_facing_up: Build and Deploy Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
    command: |
      julia --project=docs -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.develop(PackageSpec(path=pwd()))
        Pkg.instantiate()
        println("--- :julia: Building documentation")
        include("docs/make.jl")
      '
    agents:
      queue: "juliagpu"
      cuda: "*"
    env:
      DATADEPS_ALWAYS_ACCEPT: true
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 1000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "awMf4JvobFGEiccq3bKkDu/ykE8PM5soT/n6EKELwFLtG5M84+BDFv4HSW0bDHptETiKXOPbFIhReRW6QUpgyNR+o7YRa6sVRV6YjJ5fHW5a5pivk57EaMMt/7pNSAOJL2Flgd0EI7Tf67/6Tq/BpYNGnvnUSW/lC9CaUEatmVSzc1TJWoAI2mHKQaT78Q+FBPY3up3HhxJor3w6Cbo8/KQNMZRNVbKu6wrZLshnz746/dc+Fsn92gTFzepVsDUH2EYUPBm26v9d4qLC7Ua8TxbboZDayPp5fiM7h/E7dP+uGm+7g4uqthMTpMZU3Lf3OWuYMdDGGw9i8Ep5XhRDwg==;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"
