steps:
  - label: ":page_facing_up: Build and Deploy Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
    command: |
      julia --project=docs -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.develop(PackageSpec(path=pwd()))
        Pkg.instantiate()
        println("--- :julia: Building documentation")
        include("docs/make.jl")
      '
    agents:
      queue: "juliagpu"
      cuda: "*"
    env:
      DATADEPS_ALWAYS_ACCEPT: true
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 1000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "sPNkiarUIbfkOwwWEKkF4f2z6mlA7215LkWsMQvJC7qKEM3Pp5evm+wE8HSQFAge8bBETg5oyBpzwT882B/jzldQE66xZz+UjyBLyX70bo3wdewVIimCnPKT9SEmyEEp2FxGqy5XoWwAOzEI+LkIre9rvclbVhE1Kl9MDVj0zL2Bd2CwenR3AlErXHoYCPwye6gKKGCtxOj0jOUtEfnhp0DYh5LdkbH8jqmLR41OFeOyVLCuQt9p/5HeFz4n3vup4/DJRR1CN+0zi2O3SmaUsCZSk1+WcoDMIWEs1kSnwAktdR9HJTTwD0Pv9ijCjLj6miA0jtjG0De5aon9ACbvng==;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"
