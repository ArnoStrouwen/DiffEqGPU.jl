steps:
  - label: ":page_facing_up: Build and Deploy Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
    command: |
      julia --project=docs -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.develop(PackageSpec(path=pwd()))
        Pkg.instantiate()
        println("--- :julia: Building documentation")
        include("docs/make.jl")
      '
    agents:
      queue: "juliagpu"
      cuda: "*"
    env:
      DATADEPS_ALWAYS_ACCEPT: true
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 1000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "K3mlrSMvrrjO/nDiTo/ypiQThAU3ukeyI2/5PxO1kP2VMUMFWa/y3H4OhN09WAmaYxhpa4q/KNKYA5Dpb7uZNMYhs7Phtdbtnu38jqsXt8QPk2OuB6IVNITLmNyszCDC8yQ5Jly6DJqm6PeOCw3vJVkEpKZLT4WlJQk7h9uP9Aj4hWgABibeg0uVlOoQX5qc041aiBpL3Np2caQMOxc2K1T1WLMdH0z8vTwrpNwk1eiCdgrGOoAXT6Zlcm1+Ey7QnZiPe908vN+0Kw+8N6Kf5YaJdRMIAHXJyQLN/OpRR4/8kyJ5k03YUrrHSsY5SD0dKvDH8mh2UOFlucTR+1yAWA==;U2FsdGVkX1/rncyJlLrwnmR+Mmu2c1y1UnPPFBlXuBwmi9aLrJiGgpAfriC3pZ01CTKlP7S+/4JnyQRPsexDPtGeX+Veb/3kFb5cyytHWYmXTl/JLZZGwC8lRHWWjRu+QCOozrt1D3x/AgtKVX+cRp9Po6HbThJEfBb5tpH1xf/eEiKvva6+VcfupVQBBBsXjpO41gA7WouuPBX7qXKkwU4sUjaOOH/fOI1FUpPLCfzj0El2SGcRx+kvAi8XSQmjItL5KBa+FdsfyzIOy4SvnsQH0ViwAOdOFFZ0AW11XR6vCcyFxNIRTNkiDFfM+fvYxBR1WnrwKkHhLRlWduKEDhQ54cAKLQEWXqz94Qz787pbHqam/cW7xe21vZQy9QBKe1/T1ZU0P+ocRinPnMCAZoxKdXmPEPkm7iv0o032pKD8p3KgSYwA5TWATMrqye1j97KfyVJ/xiRp5lUqdDgq1Qx+ZeXD2j9XoW0Oyp9h6NLM1lgbYvahpPKSJn5TfYrwTgdM0J8EYMY0ZlWYuPerQUeLqz/kRzzf8gWI/skViMmEJ737jjIyZbangbap/XuUrg7Z5cGJKS/CTqdXw+L6WnSqg1miETzv4CHQyQcSEdSJJNV8hQ/lPMK3FJAfKJOgLSkJSKSIWd1wOwVXD5UpfUWlb4V/7iKD0tvUGJ2hp+eTFPwZIaTRI/XgcrzO49qUwmAbHWaCslgJhoBuFHN8tDldh30NwinnP5o19yJWRF+i9pEc7XfdmPVzQQREKne/u2f8Dhm1h0vNsn0eXMDr+EsnWlDmda7nJfRHpU/X12uY4gp2NNmpyMfHXkY7icMj7+w6rbrbYbhG31XuOlpc/3kgPGqscWxCS+dYz68KAjOviHyUgh3cxgJerVbslob2+QW0wDDiTIm8CeejIyg1E9qlskC9X4cS7lG3xcfb7mDUeXYtfoVzjQuYHHhgpQ/Gs1qCRKbAuBxbXrVjtSdagM+lTa0oFsya8x7e9yuovjBIMuQMk/GYluTGyc6CP68oKuJ6AQSWpnkuHI4hEbPySEG04uGUi4Apd9RrVXdGIn7MkqEsbj/wlVyPsUcDOgx1wVtbZGzI3CRXBjMghqEw2Hb1OdyJQNOghnNR8xjYAEad69OGeXIWWIQEhY2dUnT1h8a9DycTDV65mWFfBT1g9pVDSh/twOq7V0d4XdkrbhtQGwJ9sIzY3OrCAEVRHLYkQA2UDaN53HRVeRicGsg01Q5PRrIcSpICd6JTHUlig1HdCSh+hN1oGsaiLCoGbEA6+fGIsdzU0+raVsskhjLGfsiP2F5ouwiY3WrT3Rn9OOqQS84HC1CNtP5Rr6+0ha3z2Emj6/Dunser6fLEgauUmNOmaWOD85byVTouFzom+VzAGr+GX8aFDL6/bhzsQXrm1RLnoI85wJYycVTzzLxCI69bh3OBLqksQJC94V/phM7iO1OYFvWstYNALD8NaUgkDSVVDyNrVXPJQtmxoPnjD/MFDCecQ7MShOkfmJhGIEfcerkCXEy/hNu8I/VooULkRhvjYJFU3egFRF9ScJ+E/stapjaHpa0xQDFbKxP+bfi5aybjf5V2ZypbFKxTqWBYK2bhNEgXbnf+K68dctx/sDdToXWmy1xeYugxjVlWE+cbUE7mgBxf8X/6s5WuXOg3Zo0/AC6pB0Puz+QKqVfQhzqcniQ/KKdUX92zefExmuPjIGID3y756c1JIKyN3Ou1gWg/REa6QWj8gHPNLqQozLrDrizQeFXZjGExGfqAMO5wwtC1xYbvzruroNXuKqBtqXyo4r89LJiTMrtf+jLNsxqs55caGTDCf6fQlpP4/azzctwOjCUMHN0S6MQUMM9cU+Ifs09SbVrhHEk3HfQGDyIHvJ4LuuxNWzC4PXPv1/tHNRFXWKTKiWAR0WvQJtd4EvkbahvbixvDY5iKwxFKX8ucIGFbZBM7vcgWXRm/CUMjQvbJVfrgp4uJ/B38RKNpNmyvSkkWAHcdP4vzZUsCuaprKf8lNdlHEwd5yBofOfcKIE83ZYCfL9ohkeT5zZd+kjIIA1nN60VCL4mlJY+3CaE7aXkt+01K/1UsFjHNJ8ZyCu+cawbkORlm2iebeBCybhiE0gMUU+0S544B1ZSaSyLJc1l3rp3jTlI8rwrjnA4FauOlSoAxYnxNDy+mtY0Al2CxtHLewGFqhAsKjb4Zu6uIaiOZCYbnIEmLcb/U329s1Qb+LLBkzMw7ZqqyGQXd5Tkd+E3WdGwmZZrmcnyXVzFMCvydn4af1mEYx0D2Rih4KiHxnFJ7e07nnOrWBr67WJnZdYnNo9IhVSMW5OAjRk391MidIbfFBRRf+/FiZ8ZJ8XsSzPKw5shvSx7VzY+HTKINcKOQAMiUU+mzpSVmednEj15vdVnLqf98RNHBSEr1WbeInC+6OeYblgNnz3IEbTY0h6c0nZL3ESacYBMhudtJkPqhxMVpsBOcu968O7YCHyQxfelqYzDg36nwvardEFEp+DAT+DJq20SjDHdaQjM1d5hAfArXOkYPhyqfW1yx/RZoK5T3E+xfKPQBKksGEsCzEVIAgxnBHsYEBTdMR6vZJSoshXEkmgrJI1zbYS+PPGWRso3Pnt4vK+jahcdaS+B4FuE5jSxGW2BERlRjl2TK5Sto+vvH6cdgjgMyBSCLbQvuSL6lZlwXEAi07XPTkklyioGQUBNG7M3kHmPkaAVGYo0oTAFDMlHjtQKUwBSt0mnFlc4PL8m4IztmYl5zmB2c8+wmD+CPFkEfkXG23aImjufYSNV7XVEyPlW+ept50VPE/1H3KF3qkYz6DnXkKgg6mNeMdDxeL1/FQ4sVmrLp3wgsE+KhPyt9cGD1aJeEVoqpFJpWUurTOnveqDFkHR4Xo+qNzyDJa9JRVdkbx7rJK8pBF9xPwXMlXhS013k/RzwjXWYQE/zSScbPQtQLbRlmwvZqAl/Tavq17VNieBmVkxQS9p2W4/g5F37Z6epDKxU7MLZ7bd/pyVnLU7UwtKJKInRMpmeSb2v5G8jsQ1BCLhlZ6rfHPD8LxXup7pJKGY4tCCzCmCXn2QYUeyzMmUiNqIGhIy15hlc/xSCYpC5PLEfy4OcSGE+tFFxuWuT3p0duQdaNo5mT2jCBSpw9eVeCVtypRqxoft2lQIqUKToaSUCKGIIUzhWpIiudtGvv0KlL7ZBZxL4TJ79LgykVdNYvh4hVwRBt5hWmhiU4JbRjCPyZkJ0z5wLoP4y/Ytzjs0mipbmT2LhI0fnjZPad0oGmNIWoRDWJ0v9Kyif7UHg3c3RSUtHmL2EB7jXpTV3Xh+1mkhr19AhSG4v6JPQeHqEvh1AUPrU0WIRxfNdgOt4ErSPKgcWgmgr8Kf6CzPDE4w+63bWvrOtjfbEnxC5AfZtTILB/ggAHWcMvMYtVWzVkhiyiPsZiCfA67e+BRwEwjZs7zAt+v9M0Ew+CRCjlAuD9I4/X07yJ5gZMic2T5QT9uQNurNRt9za2WpTgCkQNR0TqoPhpqcN6MFnKjmEFromlzcHrI/rDFEVgMoASKkPyfdyOAqCKfNCvmdFQJO+OOuSxqglFJEjXIv9ztWxzFq2NHKt08wY4cszFIRMOkf3VUfF0h6HQckpP8bjUCG+6KiyMMcXXzdx92H7SAIN/agBspPC4Xl/3JjGtBGbX76WPjDJlJ7n9zRYkvREFYBN3xhpnw+rwQRNoFC8jSbkERKblqoHdKRtM1OKF/5EcUZ8MTr/bjSgYPXw/E4FvVtSSZuEQfC2Zt8rKUotTlJIMDwZZ8e2TsJ/6V5lNtuCeKhr1SQHHYaTeD0Bdw1DQkj/h9YVkIFG5ED2UTJRBClEJ/w1ifX8T13s80v+JpWoA1EFWwT7/qzEKFdNt+mYkMmYPyiVJc6i6wL/34JjLPqzcD7wTth1ICo6Wd5x6IrmdtKfeFCzGKfcifPGjGfqcXFqL2TcGskpfQnhrmEWkwAmYjFm4gZAV4fPzOqcrJuwiNUFsMqEAY6vIdrQPn081RWFaRbQSMOrdkPyXju7oIs2OWQyEtYmLzYge7z5ardsR/DBnuDawZet0xxhUi3d7vx/We6+m31wsJypIsCQK9nR3dX92Of54/HWXTtF8QA4Clo20CrkTFnmK5JQBi5xZECZS8QHspMEDeqKgTgfP5WRWIJ/aE8OJ91NweiAaQSFmjPUCAgKH2Cz3S+QVHMcpQk6cvM42vT2kjrV7BszRLLTNy6fXZI56V4H/d5as1YHWCkLCCwqShdPd5H7pqCwThwvciMXA2Vf0qgAWigBeRdLFT/ViVcGij5Yx04rabdLwVn4VlSwkpOOc1Ldat21sYngTBiz8+xssGiqz+SC3tzGSgpj+IUQEfgV+KA238H9nWP04vtgE5SVxqaBOzarCBFZAWvtWRPH+HRWUCksZ26N6+5BIhqR0q6tfP/CcYCZQ+wNbpOeMGseVxV3lfISyUaMRo3rA6NbDID+Ob/lXl+oDjvY4tGP2dfy1On11EIcCYQGlP8vXDOR9Y0PypL4AsboHdu9AM3jhbx4zgcI5dIydZOnQz0KFp1lhdRYV4TCE0WtJwhzp8fgrdmtAMW5REL04yZMCEJEFy3pBqFjRbtYvyXn9AaCnzmRhmwgpovdW5N107oVP/JEgMKkR5dpcRv92wBbH0+hhN8WxhOQ9nut9"
